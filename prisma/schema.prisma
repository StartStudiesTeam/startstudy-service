generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Users {
  id               String             @id @default(uuid())
  name             String
  email            String             @unique
  password         String
  nickName         String             @unique @map("nick_name")
  phoneNumber      String?            @map("phone_number")
  createdAt        DateTime           @default(now()) @map("created_at")
  updatedAt        DateTime?          @map("updated_at") @db.Timestamp(6)
  deletedAt        DateTime?          @map("deleted_at") @db.Timestamp(6)
  verifyMail       Boolean            @default(false) @map("verify_mail")
  CodeToken        CodeToken[]
  RefreshToken     RefreshToken[]
  Roadmap          Roadmap[]
  Videos           Videos[]
  Comments         Comments[]
  CommentsComments CommentsComments[]
  Likes            Likes[]
  Save             Save[]

  @@map("users")
}

model CodeToken {
  id             String    @id @default(uuid())
  userId         String    @map("user_id")
  codeToken      String    @map("code_token") @db.VarChar(6)
  confirmationAt DateTime? @map("confirmation_at") @db.Timestamp(6)
  createdAt      DateTime  @default(now()) @map("created_at")
  updatedAt      DateTime? @map("updated_at")
  deletedAt      DateTime? @map("deleted_at") @db.Timestamp(6)
  users          Users     @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("code_token")
}

model RefreshToken {
  id        String @id @default(uuid())
  expiresIn Int
  usersId   String
  user      Users  @relation(fields: [usersId], references: [id])

  @@map("refresh_token")
}

model Videos {
  id            String          @id @default(uuid())
  video         String
  title         String
  description   String?
  amountLike    Int             @map("amount_like")
  userOwnerID   String          @map("user_owner_id")
  createdAt     DateTime        @default(now()) @map("created_at")
  updatedAt     DateTime?       @map("updated_at")
  deletedAt     DateTime?       @map("deleted_at") @db.Timestamp(6)
  user          Users           @relation(fields: [userOwnerID], references: [id])
  VideosRoadmap VideosRoadmap[]
  Comments      Comments[]
  Likes         Likes[]
  Save          Save[]

  @@map("videos")
}

model Roadmap {
  id            String          @id @default(uuid())
  title         String
  description   String?
  userId        String          @map("user_id")
  createdAt     DateTime        @default(now()) @map("created_at")
  updatedAt     DateTime?       @map("updated_at")
  deletedAt     DateTime?       @map("deleted_at") @db.Timestamp(6)
  user          Users           @relation(fields: [userId], references: [id])
  VideosRoadmap VideosRoadmap[]
  Comments      Comments[]
  Likes         Likes[]
  Save          Save[]

  @@map("roadmap")
}

model VideosRoadmap {
  id        String    @id @default(uuid())
  roadmapId String    @map("roadmap_id")
  videoId   String    @map("video_id")
  createdAt DateTime  @default(now()) @map("created_at")
  updatedAt DateTime? @map("updated_at")
  deletedAt DateTime? @map("deleted_at") @db.Timestamp(6)
  roadmap   Roadmap   @relation(fields: [roadmapId], references: [id])
  videos    Videos    @relation(fields: [videoId], references: [id])

  @@map("videos_roadmap")
}

model Comments {
  id               String             @id @default(uuid())
  userId           String             @map("user_id")
  videoId          String             @map("video_id")
  roadmapId        String             @map("roadmap_id")
  createdAt        DateTime           @default(now()) @map("created_at")
  updatedAt        DateTime?          @map("updated_at")
  deletedAt        DateTime?          @map("deleted_at") @db.Timestamp(6)
  user             Users              @relation(fields: [userId], references: [id])
  videos           Videos?            @relation(fields: [videoId], references: [id])
  roadmap          Roadmap?           @relation(fields: [roadmapId], references: [id])
  CommentsComments CommentsComments[]
  Likes            Likes[]

  @@map("comments")
}

model CommentsComments {
  id         String    @id @default(uuid())
  userId     String    @map("user_id")
  commentsId String    @map("comments_id")
  createdAt  DateTime  @default(now()) @map("created_at")
  updatedAt  DateTime? @map("updated_at")
  deletedAt  DateTime? @map("deleted_at") @db.Timestamp(6)
  user       Users     @relation(fields: [userId], references: [id])
  comments   Comments  @relation(fields: [commentsId], references: [id])
  Likes      Likes[]

  @@map("comments_comments")
}

model Likes {
  id                 String            @id @default(uuid())
  userId             String            @map("user_id")
  videoId            String            @map("video_id")
  roadmapId          String            @map("roadmap_id")
  commentsId         String            @map("comments_id")
  commentscommentsId String            @map("comments_comments_id")
  createdAt          DateTime          @default(now()) @map("created_at")
  updatedAt          DateTime?         @map("updated_at")
  deletedAt          DateTime?         @map("deleted_at") @db.Timestamp(6)
  user               Users             @relation(fields: [userId], references: [id])
  videos             Videos?           @relation(fields: [videoId], references: [id])
  roadmap            Roadmap?          @relation(fields: [roadmapId], references: [id])
  comments           Comments?         @relation(fields: [commentsId], references: [id])
  commentscomments   CommentsComments? @relation(fields: [commentscommentsId], references: [id])

  @@map("likes")
}

model Save {
  id        String    @id @default(uuid())
  userId    String    @map("user_id")
  videoId   String    @map("video_id")
  roadmapId String    @map("roadmap_id")
  createdAt DateTime  @default(now()) @map("created_at")
  updatedAt DateTime? @map("updated_at")
  deletedAt DateTime? @map("deleted_at") @db.Timestamp(6)
  user      Users     @relation(fields: [userId], references: [id])
  videos    Videos?   @relation(fields: [videoId], references: [id])
  roadmap   Roadmap?  @relation(fields: [roadmapId], references: [id])

  @@map("save")
}
